(this["webpackJsonporm-frontend-task"]=this["webpackJsonporm-frontend-task"]||[]).push([[0],{119:function(e,r,t){e.exports={form:"Form_form__3NMmT"}},120:function(e,r,t){e.exports={"form-error":"FormError_form-error__20FfW"}},131:function(e,r,t){},132:function(e,r,t){},261:function(e,r,t){"use strict";t.r(r);var a,n=t(4),s=t.n(n),i=t(27),o=t(0),c=t.n(o),u=t(112),l=t.n(u),d=(t(131),t(121)),m=t(9),p=(t(132),t(7)),f=t(63),b=t.n(f),j=t(3),_=function(e){var r=e.title,t=void 0===r?"":r,a=e.children,n=void 0===a?null:a;return Object(j.jsx)("div",{className:b.a.layout,children:Object(j.jsxs)("div",{className:b.a.layout__content,children:[Object(j.jsx)("h1",{children:t}),Object(j.jsx)("div",{className:b.a["layout__children-container"],children:n})]})})},h=t(113),v=t.n(h).a.create({baseURL:"https://api.orm-task.dev/v1",timeout:5e3}),O=function(e){return v.post("/users/register",e)},x=t(122),y=t(34),w=y.a({email:y.c().email("Invalid e-mail address").required("E-mail is required"),name:y.c().matches(/[\s]/,"Missing last name").required("Full name is required"),password:y.c().min(8,"Password is too short").required("Password is required"),confirmPassword:y.c().oneOf([y.b("password"),null],"Please confirm your password").required("Please confirm your password")}),k=t(24),g=t(62),P=t(119),E=t.n(P),F=["children"],S=function(e){var r=e.children,t=Object(g.a)(e,F);return Object(j.jsx)("form",Object(k.a)(Object(k.a)({className:E.a.form},t),{},{children:r}))},N=t(37),q=t.n(N),R=function(e){var r=e.label,t=e.touched,a=void 0!==t&&t,n=e.error,s=void 0===n?"":n,i=e.formikProps,o=e.inputProps,c=void 0===o?{}:o;return Object(j.jsxs)("div",{className:q.a.field,children:[Object(j.jsx)("div",{id:"form-error_".concat(i.name),className:q.a.field__error,role:"alert","aria-label":"".concat(r," error"),children:a?s:""}),Object(j.jsxs)("label",{children:[r,Object(j.jsx)("span",{className:q.a["field__required-asterisk"],children:c.required?" *":""}),Object(j.jsx)("input",Object(k.a)(Object(k.a)({className:"".concat(q.a.field__input," ").concat(a&&s?q.a["field__input--invalid"]:""),"aria-invalid":a&&s?"true":"false","aria-describedby":"form-error_".concat(i.name)},i),c))]})]})},T=t(76),C=t.n(T),L=["children","status"],D=function(e){var r=e.children,t=e.status,a=void 0===t?null:t,n=Object(g.a)(e,L);return Object(j.jsx)("button",Object(k.a)(Object(k.a)({type:"submit",className:"".concat(C.a.submit," ").concat(a?C.a["submit--".concat(a)]:"")},n),{},{children:r}))},I=t(120),U=t.n(I),V=function(e){var r=e.touched,t=e.isValid,a=e.error;return Object(j.jsxs)("div",{className:U.a["form-error"],"aria-label":"Form error",role:"alert",children:[r&&!t&&"Form contains errors.",r&&t&&a]})},A=function(e){var r=e.onSubmit,t=e.error,a=Object(o.useState)(!1),n=Object(p.a)(a,2),s=n[0],i=n[1],c=function(e){return function(r){i(!0),e(r)}};return Object(j.jsx)(x.a,{initialValues:{email:"",name:"",password:"",confirmPassword:""},validationSchema:w,onSubmit:r,children:function(e){var r=e.touched,a=e.errors,n=e.isValid,i=e.handleSubmit,o=e.getFieldProps;return Object(j.jsxs)(S,{onSubmit:c(i),children:[Object(j.jsx)(R,{label:"E-mail address",touched:r.email,error:a.email,formikProps:o("email"),inputProps:{type:"email",required:!0}}),Object(j.jsx)(R,{label:"Full name",touched:r.name,error:a.name,formikProps:o("name"),inputProps:{type:"text",required:!0}}),Object(j.jsx)(R,{label:"Password",touched:r.password,error:a.password,formikProps:o("password"),inputProps:{type:"password",required:!0}}),Object(j.jsx)(R,{label:"Confirm your password",touched:r.confirmPassword,error:a.confirmPassword,formikProps:o("confirmPassword"),inputProps:{type:"password",required:!0}}),Object(j.jsx)(V,{isValid:n,touched:s,error:t}),Object(j.jsx)(D,{children:"Continue"})]})}})};!function(e){e.TimeoutError="ECONNABORTED"}(a||(a={}));var B=function(e){var r,t;return(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)?e.response.data.message:e.code===a.TimeoutError?"Error connecting to server. Please check your connection and contact support if issues persist.":e.message},M=function(){var e=Object(o.useState)(null),r=Object(p.a)(e,2),t=r[0],a=r[1],n=Object(o.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(null),e.next=4,O(r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a(B(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r){return e.apply(this,arguments)}}(),[]);return Object(j.jsx)(_,{title:"Sign up",children:Object(j.jsx)(A,{onSubmit:n,error:t})})},W=function(){return Object(j.jsx)(d.a,{children:Object(j.jsxs)(m.c,{children:[Object(j.jsx)(m.a,{path:"/signin",children:"Sign In"}),Object(j.jsx)(m.a,{path:"/signup",children:Object(j.jsx)(M,{})}),Object(j.jsx)(m.a,{path:"/",children:Object(j.jsx)(M,{})})]})})},H=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,262)).then((function(r){var t=r.getCLS,a=r.getFID,n=r.getFCP,s=r.getLCP,i=r.getTTFB;t(e),a(e),n(e),s(e),i(e)}))},J=t(13),Q=t(74),X=t(21),Y=t(44),z=1500,G=[X.c.post("".concat("https://api.orm-task.dev/v1","/users/register"),function(){var e=Object(i.a)(s.a.mark((function e(r,t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,w.validateSync(r.body),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",t(a.delay(z),a.status(Y.a.BAD_REQUEST),a.json({message:e.t0})));case 7:if("already@registered.com"!==(n=r.body).email){e.next=10;break}return e.abrupt("return",t(a.delay(z),a.status(Y.a.CONFLICT),a.json({message:"The e-mail address you've provided is already registered."})));case 10:if("fail me"!==n.name){e.next=12;break}return e.abrupt("return",t(a.delay(z),a.status(Y.a.INTERNAL_SERVER_ERROR),a.json({message:"There was an error processing your form data. Please contact support if issues persist."})));case 12:if("timeout me"!==n.name){e.next=14;break}return e.abrupt("return",t(a.delay("infinite")));case 14:if("network error me"!==n.name){e.next=16;break}return e.abrupt("return",t.networkError("Failed to connect."));case 16:return e.abrupt("return",t(a.delay(z),a.status(Y.a.CREATED),a.json({message:"User was successfully registered.",user:{name:n.name,email:n.email}})));case 17:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(r,t,a){return e.apply(this,arguments)}}())],K=Q.a.apply(void 0,Object(J.a)(G));(function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/orm-frontend-task"!==window.location.pathname){e.next=3;break}return window.location.pathname+="/",e.abrupt("return");case 3:return e.next=5,K.start({waitUntilReady:!0,serviceWorker:{url:"/orm-frontend-task/mockServiceWorker.js"}});case 5:l.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(W,{})}),document.getElementById("root")),H();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()},37:function(e,r,t){e.exports={field:"Field_field__3DbyS",field__error:"Field_field__error__2vHXr","field__required-asterisk":"Field_field__required-asterisk__bzYk0",field__input:"Field_field__input__2onQu","field__input--invalid":"Field_field__input--invalid__hnr4K"}},63:function(e,r,t){e.exports={layout:"Layout_layout__3NDCU",layout__content:"Layout_layout__content__YcH8X","layout__children-container":"Layout_layout__children-container__1dERg"}},76:function(e,r,t){e.exports={submit:"Submit_submit__13hGd"}}},[[261,1,2]]]);
//# sourceMappingURL=main.ffc95fa2.chunk.js.map