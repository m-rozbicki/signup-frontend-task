(this["webpackJsonporm-frontend-task"]=this["webpackJsonporm-frontend-task"]||[]).push([[0],{120:function(e,r,t){e.exports={form:"Form_form__3NMmT"}},121:function(e,r,t){e.exports={"form-error":"FormError_form-error__20FfW"}},132:function(e,r,t){},133:function(e,r,t){},262:function(e,r,t){"use strict";t.r(r);var n,a=t(4),s=t.n(a),i=t(27),o=t(0),c=t.n(o),u=t(113),l=t.n(u),d=(t(132),t(122)),m=t(9),b=(t(133),t(7)),p=t(44),j=t.n(p),_=t(2),f=function(e){var r=e.title,t=void 0===r?"":r,n=e.children,a=void 0===n?null:n;return Object(_.jsx)("div",{className:j.a.layout,children:Object(_.jsx)("div",{className:j.a.layout__container,children:Object(_.jsxs)("main",{className:j.a.layout__content,children:[Object(_.jsx)("h1",{children:t}),Object(_.jsx)("div",{className:j.a["layout__children-container"],children:a})]})})})},h=t(114),v=t.n(h).a.create({baseURL:"https://api.orm-task.dev/v1",timeout:5e3}),O=function(e){return v.post("/users/register",e)},x=t(123),y=t(35),k=y.a({email:y.c().max(50,"E-mail address is too long").email("Invalid e-mail address").required("E-mail is required"),name:y.c().max(50,"Provided name is too long").matches(/[\s]/,"Missing last name").required("Full name is required"),password:y.c().min(8,"Password is too short").required("Password is required"),confirmPassword:y.c().oneOf([y.b("password"),null],"Please confirm your password").required("Please confirm your password")}),g=t(24),w=t(63),P=t(120),S=t.n(P),E=["children"],F=function(e){var r=e.children,t=Object(w.a)(e,E);return Object(_.jsx)("form",Object(g.a)(Object(g.a)({className:S.a.form},t),{},{children:r}))},N=t(34),T=t.n(N),q=function(e){var r=e.label,t=e.touched,n=void 0!==t&&t,a=e.error,s=void 0===a?"":a,i=e.formikProps,o=e.inputProps,c=void 0===o?{}:o;return Object(_.jsxs)("div",{className:T.a.field,children:[Object(_.jsx)("div",{id:"form-error_".concat(i.name),className:T.a.field__error,role:"alert","aria-label":"".concat(r," error"),children:n?s:""}),Object(_.jsxs)("label",{className:T.a.field__label,children:[Object(_.jsxs)("span",{children:[r,Object(_.jsx)("span",{className:T.a["field__required-asterisk"],children:c.required?" *":""})]}),Object(_.jsx)("input",Object(g.a)(Object(g.a)({className:"".concat(T.a.field__input," ").concat(n&&s?T.a["field__input--invalid"]:""),"aria-invalid":n&&s?"true":"false","aria-describedby":"form-error_".concat(i.name)},i),c))]})]})},R=t(76),C=t.n(R),L=["children","status"],I=function(e){var r=e.children,t=e.status,n=void 0===t?null:t,a=Object(w.a)(e,L);return Object(_.jsx)("button",Object(g.a)(Object(g.a)({type:"submit",className:"".concat(C.a.submit," ").concat(n?C.a["submit--".concat(n)]:"")},a),{},{children:r}))},V=t(121),D=t.n(V),U=function(e){var r=e.touched,t=e.isValid,n=e.error;return Object(_.jsxs)("div",{className:D.a["form-error"],"aria-label":"Form error",role:"alert",children:[r&&!t&&"Form contains errors.",r&&t&&n]})},A=function(e){var r=e.onSubmit,t=e.error,n=Object(o.useState)(!1),a=Object(b.a)(n,2),s=a[0],i=a[1],c=function(e){return function(r){i(!0),e(r)}};return Object(_.jsx)(x.a,{initialValues:{email:"",name:"",password:"",confirmPassword:""},validationSchema:k,onSubmit:r,children:function(e){var r=e.touched,n=e.errors,a=e.isValid,i=e.handleSubmit,o=e.getFieldProps,u=e.isSubmitting;return Object(_.jsxs)(F,{onSubmit:c(i),children:[Object(_.jsx)(q,{label:"E-mail address",touched:r.email,error:n.email,formikProps:o("email"),inputProps:{type:"email",required:!0}}),Object(_.jsx)(q,{label:"Full name",touched:r.name,error:n.name,formikProps:o("name"),inputProps:{type:"text",required:!0}}),Object(_.jsx)(q,{label:"Password",touched:r.password,error:n.password,formikProps:o("password"),inputProps:{type:"password",required:!0}}),Object(_.jsx)(q,{label:"Confirm your password",touched:r.confirmPassword,error:n.confirmPassword,formikProps:o("confirmPassword"),inputProps:{type:"password",required:!0}}),Object(_.jsx)(U,{isValid:a,touched:s,error:t}),Object(_.jsx)(I,{status:u?"pending":null,children:"Continue"})]})}})},B=t(77),J=t.n(B),M=function(e){var r=e.user;return Object(_.jsxs)("div",{className:J.a["thank-you"],children:[Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:J.a["thank-you__ok-hand"],children:"\ud83d\udc4c"})}),Object(_.jsxs)("div",{children:["Thank you for registering ",Object(_.jsx)("strong",{children:r.name}),".",Object(_.jsx)("br",{}),"We would send an activation email to",Object(_.jsx)("br",{}),Object(_.jsx)("strong",{children:r.email}),Object(_.jsx)("br",{})]}),Object(_.jsx)("div",{children:"Unfortunately this is just a mock \ud83e\udd37"})]})};!function(e){e.TimeoutError="ECONNABORTED"}(n||(n={}));var W=function(e){var r,t;return"string"===typeof(null===e||void 0===e||null===(r=e.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)?e.response.data.message:e.code===n.TimeoutError?"Error connecting to server. Please check your connection and contact support if issues persist.":e.message},Y=function(){var e=Object(o.useState)(null),r=Object(b.a)(e,2),t=r[0],n=r[1],a=Object(o.useState)(null),c=Object(b.a)(a,2),u=c[0],l=c[1],d=Object(o.useCallback)(function(){var e=Object(i.a)(s.a.mark((function e(r){var t,a,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(null),e.next=4,O(r);case 4:if(t=e.sent,a=t.data,i=a.message,"string"===typeof(null===(o=a.user)||void 0===o?void 0:o.name)&&"string"===typeof(null===o||void 0===o?void 0:o.email)){e.next=9;break}return n(null!==i&&void 0!==i?i:"There was a problem with server response. Please contact support."),e.abrupt("return");case 9:l(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n(W(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r){return e.apply(this,arguments)}}(),[]);return Object(_.jsx)(f,{title:"Sign up",children:u?Object(_.jsx)(M,{user:u}):Object(_.jsx)(A,{onSubmit:d,error:t})})},H=function(){return Object(_.jsx)(d.a,{children:Object(_.jsxs)(m.c,{children:[Object(_.jsx)(m.a,{path:"/signin",children:"Sign In"}),Object(_.jsx)(m.a,{path:"/signup",children:Object(_.jsx)(Y,{})}),Object(_.jsx)(m.a,{path:"/",children:Object(_.jsx)(Y,{})})]})})},Q=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,263)).then((function(r){var t=r.getCLS,n=r.getFID,a=r.getFCP,s=r.getLCP,i=r.getTTFB;t(e),n(e),a(e),s(e),i(e)}))},X=t(13),z=t(74),G=t(21),K=t(45),Z=1500,$=function(e){return e+(1e3*Math.random()-500)},ee=[G.c.post("".concat("https://api.orm-task.dev/v1","/users/register"),function(){var e=Object(i.a)(s.a.mark((function e(r,t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,k.validateSync(r.body),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",t(n.delay($(Z)),n.status(K.a.BAD_REQUEST),n.json({message:e.t0})));case 7:if("already@registered.com"!==(a=r.body).email){e.next=10;break}return e.abrupt("return",t(n.delay($(Z)),n.status(K.a.CONFLICT),n.json({message:"The e-mail address you've provided is already registered."})));case 10:if("fail me"!==a.name){e.next=12;break}return e.abrupt("return",t(n.delay($(Z)),n.status(K.a.INTERNAL_SERVER_ERROR),n.json({message:"There was an error processing your form data. Please contact support if issues persist."})));case 12:if("timeout me"!==a.name){e.next=14;break}return e.abrupt("return",t(n.delay("infinite")));case 14:if("network error me"!==a.name){e.next=16;break}return e.abrupt("return",t.networkError("Failed to connect."));case 16:return e.abrupt("return",t(n.delay($(Z)),n.status(K.a.CREATED),n.json({message:"User was successfully registered.",user:{name:a.name,email:a.email}})));case 17:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(r,t,n){return e.apply(this,arguments)}}())],re=z.a.apply(void 0,Object(X.a)(ee));(function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/orm-frontend-task"!==window.location.pathname){e.next=3;break}return window.location.pathname+="/",e.abrupt("return");case 3:return e.next=5,re.start({waitUntilReady:!0,serviceWorker:{url:"/orm-frontend-task/mockServiceWorker.js"}});case 5:l.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(H,{})}),document.getElementById("root")),Q();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()},34:function(e,r,t){e.exports={field:"Field_field__3DbyS",field__error:"Field_field__error__2vHXr",field__label:"Field_field__label__21wSi","field__required-asterisk":"Field_field__required-asterisk__bzYk0",field__input:"Field_field__input__2onQu","field__input--invalid":"Field_field__input--invalid__hnr4K"}},44:function(e,r,t){e.exports={layout:"Layout_layout__3NDCU",layout__container:"Layout_layout__container__3ja_H",layout__content:"Layout_layout__content__YcH8X","layout__children-container":"Layout_layout__children-container__1dERg"}},76:function(e,r,t){e.exports={submit:"Submit_submit__13hGd","submit--pending":"Submit_submit--pending__1yxvv","button-loading-spinner":"Submit_button-loading-spinner__E1JVn"}},77:function(e,r,t){e.exports={"thank-you":"ThankYou_thank-you__3FJI6","thank-you__ok-hand":"ThankYou_thank-you__ok-hand__18EfV"}}},[[262,1,2]]]);
//# sourceMappingURL=main.cbaf2ee8.chunk.js.map